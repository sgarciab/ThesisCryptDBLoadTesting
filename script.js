import http from 'k6/http';
import { sleep } from 'k6';

const baseUrl= "http://localhost:8000";
export default function () {
    const params = {
        timeout: 180,
      };
    const user_ids = [7884,11229,11723,5935,7327,2589,6258,7009,11818,1986,3949,5032,384,3127,9428,266,4966,878,518,6156,3145,7275,6079,3742,5030,9561,5535,2100,4392,1459,4239,10751,8799,111,3598,3026,11018,3940,6214,9676,5841,4502,820,6359,8619,10916,422,2639,5679,10852,5761,6090,2457,3379,3377,12003,10248,5525,10774,9030,1442,711,3623,1257,2208,2341,4401,2378,9968,11957,7180,8780,877,11342,11234,11236,6805,5897,11762,10207,7778,12039,3793,5215,3070,854,7979,10134,2045,9555,7695,9965,689,6579,2365,1018,10686,8678,7629,9002,5107,10675,2442,1563,3722,3267,1552,4784,9061,5382,6697,3792,11702,3987,9518,7107,6317,5244,5476,7698,1900,3952,9402,8731,6630,12125,9981,4954,6917,4577,6884,3347,9274,209,1988,6171,7101,10668,4949,4770,7232,8081,11255,9144,11242,1197,9454,11486,9966,3639,698,5820,12306,9505,10377,1872,2598,2093,10799,6850,1493,1286,12149,5242,7809,8432,7223,5830,1283,11061,947,6069,3218,6891,5544,7574,9036,5171,2984,9058,6901,5727,494,7533,11003,7029,8452,6061,6828,8789,6063,5392,6497,10694,8900,3178,9249,9403,8109,1530,8917,8559,3543,1616,1086,5689,8426,7936,2846,1767,10502,9706,4155,8209,2636,3874,5979,4708,5710,5547,1331,9341,11595,10531,6279,109,5564,4423,3065,3100,2712,9871,11432,11809,9954,8533,12344,291,8105,6756,3969,9782,6878,10144,6940,1180,2473,11671,546,11638,948,3513,665,12122,12367,902,5163,12087,8498,8675,835,9710,11554,7755,904,7393,5348,12508,9547,12501,523,3935,10425,9575,5193,6398,10948,674,5196,7310,7632,1544,12346,12167,12113,2825,9385,3490,11756,2718,6481,3084,154,199,10075,7102,1084,2467,10257,11862,11051,7930,1354,12365,3866,8803,8896,12567,4328,6448,4618,6378,8668,9973,5685,191,6632,5527,1339,7187,4958,7477,3977,773,36,11860,2667,7996,8670,165,12410,6176,12140,822,10932,10757,11870,7965,5950,10954,2387,1535,2298,747,4787,8296,9856,2974,6534,124,5958,1819,3425,3632,9253,11098,9261,890,4713,7338,7517,10623,5285,11728,8674,8167,9763,6692,345,4467,1578,3895,10820,2361,2577,9206,2479,2420,10835,10957,11559,9364,11700,4641,34,4916,107,9498,671,236,1163,3685,12530,10369,5124,5031,1709,1203,8887,7676,8228,10532,2090,5460,7095,10428,7216,4405,5913,3250,8532,4843,5692,5453,3939,5071,6958,11442,23,402,3225,8258,3575,2049,4317,4588,7184,975,1936,9727,852,5771,11421,6700,6179,2349,4900,11474,605,11912,7709,5691,5865,2611,8393,11920,6576,249,12274,11446,9725,4929,6533,9094,2338,885,188,256,5901,11339,11019,8978,9897,11085,9356,9481,10854,5772,10832,8273,4962,11043,4390,11288,85,4313,12008,533,12351,5816,5752,12110,3703,357,10206,2413,1401,5495,10721,12831,6428,6621,5060,10174,9622,8800,9976,9008,7798,7666,10581,9602,7241,2830,1106,5867,11861,8795,10814,1985,12233,6510,1860,9096,5978,8501,2759,4308,9592,12013,7427,1121,6529,8231,502,11993,11643,9889,305,963,9443,2747,7973,4555,5885,1816,7449,6432,10302,1332,9311,5343,7482,9271,12312,6598,4904,11538,9128,7616,7230,12065,8337,11032,3242,9245,735,8427,4655,2369,1186,9686,6088,222,12020,5247,11328,4187,7585,2092,969,12183,6262,8492,7299,4113,3482,2921,4292,7253,7756,11138,11285,11722,8735,5954,7339,8698,406,6024,11162,4974,4290,12014,5774,12540,5199,11147,5078]
    user_ids.forEach(element => {
        http.get(`${baseUrl}/api/patient/${element}/chartevent`, params);
        http.get(`${baseUrl}/api/patient/${element}/chartevent`,params);
        http.get(`${baseUrl}/api/patient/${element}/labevent`,params);
    })
    //K6_STATSD_ENABLE_TAGS=true K6_STATSD_NAMESPACE=k6_node_1_users_10 k6 run --vus 100 --duration 300s --out statsd script.js
}

